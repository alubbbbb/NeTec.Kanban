@using Microsoft.AspNetCore.Identity
@using NeTec.Kanban.Domain.Entities

@* Teilansicht: Header-Authentifizierung.
    Steuert die Anzeige von Benutzerinformationen und Login/Logout-Schaltflächen.
*@

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@if (SignInManager.IsSignedIn(User))
{
    // Abrufen des aktuellen Benutzerobjekts für die Anzeige des vollen Namens
    var appUser = await UserManager.GetUserAsync(User);
    var displayName = appUser?.FullName ?? User.Identity?.Name;

    <div class="d-flex align-items-center gap-3">
        <small class="text-muted d-none d-md-block">
            Angemeldet als: <span class="fw-bold text-dark">@displayName</span>
        </small>

        <a asp-area="Identity" asp-page="/Account/Logout" class="btn btn-sm logout-btn" title="Abmelden">
            <i class="bi bi-box-arrow-right me-1"></i> Logout
        </a>
    </div>
}
else
{
    <div class="d-flex gap-2">
        <a asp-area="Identity" asp-page="/Account/Login" asp-route-returnUrl="/" class="btn btn-outline-secondary btn-sm">
            <i class="bi bi-box-arrow-in-right me-1"></i> Login
        </a>
        @* <a asp-area="Identity" asp-page="/Account/Register" asp-route-returnUrl="/" class="btn btn-primary btn-sm fw-bold">
            Registrieren
        </a> 
        *@
    </div>
}